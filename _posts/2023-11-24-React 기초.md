---
layout: post
title: "React"
date: 2023-11-24
desc: "react"
keywords: "react"
categories: [Web]
tags: [Web]
icon: fa-brands fa-react
---

# JSX

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>React를 썼을때 이점</title>
  </head>

  <body>
    <div id="root"></div>
  </body>
  <script
    src="https://unpkg.com/react@18/umd/react.development.js"
    crossorigin
  ></script>
  <script
    src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
    crossorigin
  ></script>
  <script type="text/babel">
    let counter = 0;
    const root = document.getElementById("root");
    const span = React.createElement(
      "span",
      { id: "count" },
      "Total clicks : 0"
    ); // span 태그생성하는데, 속성은 {}고, innerHTML은 Total Clicks : 0
    const btn = React.createElement(
      "button",
      {
        onClick: () => {
          counter += 1;
          console.log(counter);
        },
      },
      "Click me"
    );
    const container = React.createElement("div", null, [span, btn]);

    ReactDOM.render(container, root); // container 변수를 root아래 두기
  </script>
</html>
```

위와 같은 코드를 JSX로 변경해보자  
변경을 위해서는 babel을 사용해주어야한다.

```html
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script type ="text/babel">
```

위와 같이 써준다.

```html
<script
  src="https://unpkg.com/react@18/umd/react.development.js"
  crossorigin
></script>
<script
  src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
  crossorigin
></script>
<script type="text/babel">
  const btn = React.createElement(
    "button",
    {
      onClick: () => {
        counter += 1;
        console.log(counter);
      },
    },
    "Click me"
  );
</script>
```

위의 부분을 변경할 것이다.

```html
<script
  src="https://unpkg.com/react@18/umd/react.development.js"
  crossorigin
></script>
<script
  src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
  crossorigin
></script>
<script type="text/babel">
  const btn = (
    <button
      onClick={() => {
        counter += 1;
        console.log(counter);
      }}
    >
      Click me
    </button>
  );
</script>
```

root아래 container를 포함시키기 위해서는

```html
<script type="text/babel">
  const container = React.createElement("div", null, [span, btn]);
</script>
```

위 내용을 아래와 같이 변경한다.

```html
<script type="text/babel">
  const container = <div>span btn</div>;
</script>
```

그러나 위와 같이 하면 text span btn이 나타나고 실제 span과 btn element가 나오지는 않는다. 이를 위해 span와 btn을 함수화해야한다. 이때 변수명들은 대문자로 적는다.(컴포넌트의 첫글자는 반드시 대문자)

```html
<script type="text/babel">
  const container = React.createElement("div", null, [span, btn]);
</script>
```

```html
<script type="text/babel">
  const Span = () => <span id="count">Total clicks : 0</span>;
  const Btn = () => (
    <button
      onClick={() => {
        counter += 1;
        console.log(counter);
      }}
    >
      Click me
    </button>
  );

  const container = (
    <div>
      <Span /> <Btn />
    </div>
  );
</script>
```

# innerTEXT 변경하기

기존에 js의 경우에는 innerText를 변경하기 위해서는 이렇게 했다.

```html
<script>
  counter += 1;
  span.innerText = `Total clicks: ${counter}`;
</script>
```

그러나 react에서는 `{변수명}`을 써주면 된다.

```html
<script type="text/babel">
  const root = document.getElementById("root");
  let counter = 0;
  function countUp() {
    counter += 1;
    console.log(counter);
  }
  const Span = () => <span id="count">Total clicks : {counter}</span>; // ===========> {변수명}으로 연결

  const Btn = () => <button onClick={countUp}>Click me</button>;

  const container = (
    <div>
      <Span /> <Btn />
    </div>
  );
  ReactDOM.render(container, root);
</script>
```

실제로 웹브라우져로 띄워보면 console.log로 count가 증가함을 알수 있지만 UI는 업데이트가 안되고 있다. 렌더링을 한번만 하기 때문이다. 그래서 `countUp`함수에 리렌더링을 추가한다.

```html
<script type="text/babel">
  const root = document.getElementById("root");
  let counter = 0;
  function countUp() {
    counter += 1;
    console.log(counter);
    ReactDOM.render(container, root); // =====================> 리렌더링
  }
  const Span = () => <span id="count">Total clicks : {counter}</span>;
  const Btn = () => <button onClick={countUp}>Click me</button>;

  const container = (
    <div>
      <Span /> <Btn />
    </div>
  );
  ReactDOM.render(container, root);
</script>
```

그런데 const Span, Btn, container는 함수로 변경이 가능하다. 형태를 모두 동일하게 가져가기 위해 함수형식으로 바꿔주자
container를 컴포넌트로 바꿔(함수로)줬기 때문에 render부분도 변경해야한다.

```html
<script type="text/babel">
  const root = document.getElementById("root");
  let counter = 0;
  function countUp() {
    counter += 1;
    console.log(counter);
    render();
  }

  function render() {
    ReactDOM.render(<Container />, root); // container 변수를 root아래 두기
  }

  function Span() {
    return <span id="count">Total clicks : {counter}</span>;
  }
  function Btn() {
    return <button onClick={countUp}>Click me</button>;
  }

  function Container() {
    return (
      <div>
        <Span /> <Btn />
      </div>
    );
  }

  render();
</script>
```

위와 같이 하게 되면 데이버가 변경될때마다 render함수를 잊지않고 써줘야하는 번거로움이 있다. 더 쉽게 할 수 있는 방법이 있다. 이때 `React.useState()`를 사용한다. `React.useState()`는 `[초기값,초기값을 변경하는 함수]`를 리턴한다.
초기값은 ()안에 써준다. 그래서 countUp 함수를 쓸 필요가 없는데 `React.useState()`를 쓰면 아래와 같이 바뀐다.

```html
<script type="text/babel">
  const root = document.getElementById("root");

  function App() {
    const [count, setCount] = React.useState(0);

    function countUp() {
      //   setCount(count + 1);
      // 위에는 값을 직접 변경하지만 아래는 state function을 통해 현재값으로 부터 접근
      setCount((current) => current + 1);
    }

    return (
      <div>
        <h3>Total clicks : {count}</h3>
        <button onClick={countUp}>Click Me</button>
      </div>
    );
  }

  ReactDOM.render(<App />, root);
</script>
```

# 시간 변환기 만들기

```html
<script type="text/babel">
  const root = document.getElementById("root");

  function App() {
    const [mins, setMins] = React.useState(0);
    const [hours, setHours] = React.useState(0);
    const [flipped, setFliped] = React.useState(false);

    const onChange = (event) => {
      setMins(event.target.value);
      setHours(event.target.value);
    };

    const reset = () => {
      setMins(0);
    };

    const flip = () => {
      reset();
      setFliped((current) => !current);
    };
    return (
      <div>
        <h1>컨버터</h1>
        <div>
          <label htmlFor="mins">Minutes</label>
          <input
            value={flipped ? mins * 60 : mins}
            placeholder="분"
            type="number"
            id="mins"
            onChange={onChange}
            disabled={flipped == true}
          />
        </div>
        <div>
          <label htmlFor="hours">Hours</label>
          <input
            value={flipped ? mins : mins / 60}
            placeholder="시간"
            type="number"
            id="hours"
            onChange={onChange}
            disabled={flipped == false}
          />
        </div>
        <button onClick={reset}>Reset</button>
        <button onClick={flip}>Flip</button>
      </div>
    );
  }

  ReactDOM.render(<App />, root);
</script>
```
